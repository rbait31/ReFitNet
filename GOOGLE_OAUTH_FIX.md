# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ redirect_uri_mismatch

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ `redirect_uri_mismatch` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ redirect URI, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ —É–∫–∞–∑–∞–Ω –≤ Google Cloud Console.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π NEXTAUTH_URL

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `NEXTAUTH_URL`:

**–î–ª—è localhost:**
```env
NEXTAUTH_URL=http://localhost:3000
```

**–î–ª—è production (Vercel):**
```env
NEXTAUTH_URL=https://your-domain.vercel.app
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Google Cloud Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Google Cloud Console](https://console.cloud.google.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **Credentials**
3. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à OAuth 2.0 Client ID (–∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `342185721511...`)
4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. –í —Ä–∞–∑–¥–µ–ª–µ **Authorized redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ **–¢–û–ß–ù–û** —Å–ª–µ–¥—É—é—â–∏–µ URI:

#### –î–ª—è Development (localhost):
```
http://localhost:3000/api/auth/callback/google
```

#### –î–ª—è Production (Vercel):
```
https://your-domain.vercel.app/api/auth/callback/google
```
–ó–∞–º–µ–Ω–∏—Ç–µ `your-domain.vercel.app` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω Vercel.

**–í–ê–ñ–ù–û:**
- URI –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–¢–û–ß–ù–û** —Ç–∞–∫–∏–º–∏, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ
- –ë–µ–∑ —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ
- –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º (http –¥–ª—è localhost, https –¥–ª—è production)
- –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç–µ–º `/api/auth/callback/google`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth Consent Screen

1. –í Google Cloud Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **OAuth consent screen**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - **User Type** –≤—ã–±—Ä–∞–Ω (Internal –∏–ª–∏ External)
   - **App name** —É–∫–∞–∑–∞–Ω
   - **Support email** —É–∫–∞–∑–∞–Ω
   - **Authorized domains** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### 4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OOB flow

–°—Ç–∞—Ä—ã–π OOB (out-of-band) flow –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `urn:ietf:wg:oauth:2.0:oob` –≤ redirect URIs
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π callback URL: `/api/auth/callback/google`

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Google Cloud Console
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã (–∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:
   ```bash
   npm run dev
   ```
4. –û—á–∏—Å—Ç–∏—Ç–µ cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–æ–π redirect URI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

NextAuth –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç redirect URI –Ω–∞ –æ—Å–Ω–æ–≤–µ `NEXTAUTH_URL`:
- –ï—Å–ª–∏ `NEXTAUTH_URL=http://localhost:3000`, —Ç–æ redirect URI –±—É–¥–µ—Ç: `http://localhost:3000/api/auth/callback/google`
- –ï—Å–ª–∏ `NEXTAUTH_URL=https://your-domain.vercel.app`, —Ç–æ redirect URI –±—É–¥–µ—Ç: `https://your-domain.vercel.app/api/auth/callback/google`

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
GET /api/auth/callback/google?code=...&state=...
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –¥—Ä—É–≥–æ–π –ø—É—Ç—å, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

## üìù –ß–µ–∫–ª–∏—Å—Ç

- [ ] `NEXTAUTH_URL` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `.env`
- [ ] –í Google Console –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π redirect URI –¥–ª—è localhost
- [ ] –í Google Console –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π redirect URI –¥–ª—è production (–µ—Å–ª–∏ –¥–µ–ø–ª–æ–∏—Ç–µ)
- [ ] OAuth Consent Screen –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Google Console —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [ ] –ü—Ä–æ—à–ª–æ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- [ ] Dev —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] Cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ—á–∏—â–µ–Ω—ã

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

1. **–õ–∏—à–Ω–∏–π —Å–ª–µ—à –≤ –∫–æ–Ω—Ü–µ:**
   - ‚ùå `http://localhost:3000/api/auth/callback/google/`
   - ‚úÖ `http://localhost:3000/api/auth/callback/google`

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª:**
   - ‚ùå `https://localhost:3000/api/auth/callback/google` (–¥–ª—è localhost)
   - ‚úÖ `http://localhost:3000/api/auth/callback/google`

3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å:**
   - ‚ùå `http://localhost:3000/auth/callback/google`
   - ‚úÖ `http://localhost:3000/api/auth/callback/google`

4. **–ü–æ—Ä—Ç –Ω–µ —É–∫–∞–∑–∞–Ω:**
   - ‚ùå `http://localhost/api/auth/callback/google`
   - ‚úÖ `http://localhost:3000/api/auth/callback/google`

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π OAuth Client ID
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ OAuth Client –Ω–µ –±—ã–ª —É–¥–∞–ª–µ–Ω –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Google Console –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ IP –∏–ª–∏ –¥–æ–º–µ–Ω—É
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π OAuth Client ID –∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è


